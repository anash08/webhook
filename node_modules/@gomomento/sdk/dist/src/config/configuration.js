"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CacheConfiguration = void 0;
class CacheConfiguration {
    constructor(props) {
        this.loggerFactory = props.loggerFactory;
        this.retryStrategy = props.retryStrategy;
        this.transportStrategy = props.transportStrategy;
        this.middlewares = props.middlewares;
    }
    getLoggerFactory() {
        return this.loggerFactory;
    }
    getRetryStrategy() {
        return this.retryStrategy;
    }
    withRetryStrategy(retryStrategy) {
        return new CacheConfiguration({
            loggerFactory: this.loggerFactory,
            retryStrategy: retryStrategy,
            transportStrategy: this.transportStrategy,
            middlewares: this.middlewares,
        });
    }
    getTransportStrategy() {
        return this.transportStrategy;
    }
    withTransportStrategy(transportStrategy) {
        return new CacheConfiguration({
            loggerFactory: this.loggerFactory,
            retryStrategy: this.retryStrategy,
            transportStrategy: transportStrategy,
            middlewares: this.middlewares,
        });
    }
    getMiddlewares() {
        return this.middlewares;
    }
    withMiddlewares(middlewares) {
        return new CacheConfiguration({
            loggerFactory: this.loggerFactory,
            retryStrategy: this.retryStrategy,
            transportStrategy: this.transportStrategy,
            middlewares: middlewares,
        });
    }
    addMiddleware(middleware) {
        return new CacheConfiguration({
            loggerFactory: this.loggerFactory,
            retryStrategy: this.retryStrategy,
            transportStrategy: this.transportStrategy,
            middlewares: [middleware, ...this.middlewares],
        });
    }
    withClientTimeoutMillis(clientTimeout) {
        return new CacheConfiguration({
            loggerFactory: this.loggerFactory,
            retryStrategy: this.retryStrategy,
            transportStrategy: this.transportStrategy.withClientTimeoutMillis(clientTimeout),
            middlewares: this.middlewares,
        });
    }
}
exports.CacheConfiguration = CacheConfiguration;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlndXJhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb25maWcvY29uZmlndXJhdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUF1RkEsTUFBYSxrQkFBa0I7SUFNN0IsWUFBWSxLQUF5QjtRQUNuQyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUM7UUFDekMsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDO1FBQ3pDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUMsaUJBQWlCLENBQUM7UUFDakQsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDO0lBQ3ZDLENBQUM7SUFFRCxnQkFBZ0I7UUFDZCxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDNUIsQ0FBQztJQUVELGdCQUFnQjtRQUNkLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUM1QixDQUFDO0lBRUQsaUJBQWlCLENBQUMsYUFBNEI7UUFDNUMsT0FBTyxJQUFJLGtCQUFrQixDQUFDO1lBQzVCLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYTtZQUNqQyxhQUFhLEVBQUUsYUFBYTtZQUM1QixpQkFBaUIsRUFBRSxJQUFJLENBQUMsaUJBQWlCO1lBQ3pDLFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVztTQUM5QixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsb0JBQW9CO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDO0lBQ2hDLENBQUM7SUFFRCxxQkFBcUIsQ0FBQyxpQkFBb0M7UUFDeEQsT0FBTyxJQUFJLGtCQUFrQixDQUFDO1lBQzVCLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYTtZQUNqQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWE7WUFDakMsaUJBQWlCLEVBQUUsaUJBQWlCO1lBQ3BDLFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVztTQUM5QixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsY0FBYztRQUNaLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUMxQixDQUFDO0lBRUQsZUFBZSxDQUFDLFdBQXlCO1FBQ3ZDLE9BQU8sSUFBSSxrQkFBa0IsQ0FBQztZQUM1QixhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWE7WUFDakMsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhO1lBQ2pDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxpQkFBaUI7WUFDekMsV0FBVyxFQUFFLFdBQVc7U0FDekIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELGFBQWEsQ0FBQyxVQUFzQjtRQUNsQyxPQUFPLElBQUksa0JBQWtCLENBQUM7WUFDNUIsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhO1lBQ2pDLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYTtZQUNqQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsaUJBQWlCO1lBQ3pDLFdBQVcsRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7U0FDL0MsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELHVCQUF1QixDQUFDLGFBQXFCO1FBQzNDLE9BQU8sSUFBSSxrQkFBa0IsQ0FBQztZQUM1QixhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWE7WUFDakMsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhO1lBQ2pDLGlCQUFpQixFQUNmLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyx1QkFBdUIsQ0FBQyxhQUFhLENBQUM7WUFDL0QsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXO1NBQzlCLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRjtBQTFFRCxnREEwRUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1JldHJ5U3RyYXRlZ3l9IGZyb20gJy4vcmV0cnkvcmV0cnktc3RyYXRlZ3knO1xuaW1wb3J0IHtNaWRkbGV3YXJlfSBmcm9tICcuL21pZGRsZXdhcmUvbWlkZGxld2FyZSc7XG5pbXBvcnQge01vbWVudG9Mb2dnZXJGYWN0b3J5fSBmcm9tICcuLi8nO1xuaW1wb3J0IHtUcmFuc3BvcnRTdHJhdGVneX0gZnJvbSAnLi90cmFuc3BvcnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZ3VyYXRpb25Qcm9wcyB7XG4gIC8qKlxuICAgKiBDb25maWd1cmVzIGxvZ2dpbmcgdmVyYm9zaXR5IGFuZCBmb3JtYXRcbiAgICovXG4gIGxvZ2dlckZhY3Rvcnk6IE1vbWVudG9Mb2dnZXJGYWN0b3J5O1xuICAvKipcbiAgICogQ29uZmlndXJlcyBob3cgYW5kIHdoZW4gZmFpbGVkIHJlcXVlc3RzIHdpbGwgYmUgcmV0cmllZFxuICAgKi9cbiAgcmV0cnlTdHJhdGVneTogUmV0cnlTdHJhdGVneTtcbiAgLyoqXG4gICAqIENvbmZpZ3VyZXMgbG93LWxldmVsIG9wdGlvbnMgZm9yIG5ldHdvcmsgaW50ZXJhY3Rpb25zIHdpdGggdGhlIE1vbWVudG8gc2VydmljZVxuICAgKi9cbiAgdHJhbnNwb3J0U3RyYXRlZ3k6IFRyYW5zcG9ydFN0cmF0ZWd5O1xuICAvKipcbiAgICogQ29uZmlndXJlcyBtaWRkbGV3YXJlIGZ1bmN0aW9ucyB0aGF0IHdpbGwgd3JhcCBlYWNoIHJlcXVlc3RcbiAgICovXG4gIG1pZGRsZXdhcmVzOiBNaWRkbGV3YXJlW107XG59XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciBNb21lbnRvIENhY2hlQ2xpZW50LlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ29uZmlndXJhdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZ3VyYXRpb24ge1xuICAvKipcbiAgICogQHJldHVybnMge01vbWVudG9Mb2dnZXJGYWN0b3J5fSB0aGUgY3VycmVudCBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIGxvZ2dpbmcgdmVyYm9zaXR5IGFuZCBmb3JtYXRcbiAgICovXG4gIGdldExvZ2dlckZhY3RvcnkoKTogTW9tZW50b0xvZ2dlckZhY3Rvcnk7XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtSZXRyeVN0cmF0ZWd5fSB0aGUgY3VycmVudCBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIGhvdyBhbmQgd2hlbiBmYWlsZWQgcmVxdWVzdHMgd2lsbCBiZSByZXRyaWVkXG4gICAqL1xuICBnZXRSZXRyeVN0cmF0ZWd5KCk6IFJldHJ5U3RyYXRlZ3k7XG5cbiAgLyoqXG4gICAqIENvcHkgY29uc3RydWN0b3IgZm9yIG92ZXJyaWRpbmcgUmV0cnlTdHJhdGVneVxuICAgKiBAcGFyYW0ge1JldHJ5U3RyYXRlZ3l9IHJldHJ5U3RyYXRlZ3lcbiAgICogQHJldHVybnMge0NvbmZpZ3VyYXRpb259IGEgbmV3IENvbmZpZ3VyYXRpb24gb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBSZXRyeVN0cmF0ZWd5XG4gICAqL1xuICB3aXRoUmV0cnlTdHJhdGVneShyZXRyeVN0cmF0ZWd5OiBSZXRyeVN0cmF0ZWd5KTogQ29uZmlndXJhdGlvbjtcblxuICAvKipcbiAgICogQHJldHVybnMge1RyYW5zcG9ydFN0cmF0ZWd5fSB0aGUgY3VycmVudCBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHdpcmUgaW50ZXJhY3Rpb25zIHdpdGggdGhlIE1vbWVudG8gc2VydmljZVxuICAgKi9cbiAgZ2V0VHJhbnNwb3J0U3RyYXRlZ3koKTogVHJhbnNwb3J0U3RyYXRlZ3k7XG5cbiAgLyoqXG4gICAqIENvcHkgY29uc3RydWN0b3IgZm9yIG92ZXJyaWRpbmcgVHJhbnNwb3J0U3RyYXRlZ3lcbiAgICogQHBhcmFtIHtUcmFuc3BvcnRTdHJhdGVneX0gdHJhbnNwb3J0U3RyYXRlZ3lcbiAgICogQHJldHVybnMge0NvbmZpZ3VyYXRpb259IGEgbmV3IENvbmZpZ3VyYXRpb24gb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBUcmFuc3BvcnRTdHJhdGVneVxuICAgKi9cbiAgd2l0aFRyYW5zcG9ydFN0cmF0ZWd5KHRyYW5zcG9ydFN0cmF0ZWd5OiBUcmFuc3BvcnRTdHJhdGVneSk6IENvbmZpZ3VyYXRpb247XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtNaWRkbGV3YXJlW119IHRoZSBtaWRkbGV3YXJlIGZ1bmN0aW9ucyB0aGF0IHdpbGwgd3JhcCBlYWNoIHJlcXVlc3RcbiAgICovXG4gIGdldE1pZGRsZXdhcmVzKCk6IE1pZGRsZXdhcmVbXTtcblxuICAvKipcbiAgICogQ29weSBjb25zdHJ1Y3RvciBmb3Igb3ZlcnJpZGluZyBNaWRkbGV3YXJlc1xuICAgKiBAcGFyYW0ge01pZGRsZXdhcmVbXX0gbWlkZGxld2FyZXNcbiAgICogQHJldHVybnMge0NvbmZpZ3VyYXRpb259IGEgbmV3IENvbmZpZ3VyYXRpb24gb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBNaWRkbGV3YXJlc1xuICAgKi9cbiAgd2l0aE1pZGRsZXdhcmVzKG1pZGRsZXdhcmVzOiBNaWRkbGV3YXJlW10pOiBDb25maWd1cmF0aW9uO1xuXG4gIC8qKlxuICAgKiBDb3B5IGNvbnN0cnVjdG9yIHRoYXQgYWRkcyBhIHNpbmdsZSBtaWRkbGV3YXJlIHRvIHRoZSBleGlzdGluZyBtaWRkbGV3YXJlc1xuICAgKiBAcGFyYW0ge01pZGRsZXdhcmV9IG1pZGRsZXdhcmVcbiAgICogQHJldHVybnMge0NvbmZpZ3VyYXRpb259IGEgbmV3IENvbmZpZ3VyYXRpb24gb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBNaWRkbGV3YXJlIGFwcGVuZGVkIHRvIHRoZSBsaXN0IG9mIGV4aXN0aW5nIE1pZGRsZXdhcmVzXG4gICAqL1xuICBhZGRNaWRkbGV3YXJlKG1pZGRsZXdhcmU6IE1pZGRsZXdhcmUpOiBDb25maWd1cmF0aW9uO1xuXG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBjb3B5IGNvbnN0cnVjdG9yIHRoYXQgdXBkYXRlcyB0aGUgY2xpZW50LXNpZGUgdGltZW91dCBzZXR0aW5nIGluIHRoZSBUcmFuc3BvcnRTdHJhdGVneVxuICAgKiBAcGFyYW0ge251bWJlcn0gY2xpZW50VGltZW91dE1pbGxpc1xuICAgKiBAcmV0dXJucyB7Q29uZmlndXJhdGlvbn0gYSBuZXcgQ29uZmlndXJhdGlvbiBvYmplY3Qgd2l0aCBpdHMgVHJhbnNwb3J0U3RyYXRlZ3kgdXBkYXRlZCB0byB1c2UgdGhlIHNwZWNpZmllZCBjbGllbnQgdGltZW91dFxuICAgKi9cbiAgd2l0aENsaWVudFRpbWVvdXRNaWxsaXMoY2xpZW50VGltZW91dE1pbGxpczogbnVtYmVyKTogQ29uZmlndXJhdGlvbjtcbn1cblxuZXhwb3J0IGNsYXNzIENhY2hlQ29uZmlndXJhdGlvbiBpbXBsZW1lbnRzIENvbmZpZ3VyYXRpb24ge1xuICBwcml2YXRlIHJlYWRvbmx5IGxvZ2dlckZhY3Rvcnk6IE1vbWVudG9Mb2dnZXJGYWN0b3J5O1xuICBwcml2YXRlIHJlYWRvbmx5IHJldHJ5U3RyYXRlZ3k6IFJldHJ5U3RyYXRlZ3k7XG4gIHByaXZhdGUgcmVhZG9ubHkgdHJhbnNwb3J0U3RyYXRlZ3k6IFRyYW5zcG9ydFN0cmF0ZWd5O1xuICBwcml2YXRlIHJlYWRvbmx5IG1pZGRsZXdhcmVzOiBNaWRkbGV3YXJlW107XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IENvbmZpZ3VyYXRpb25Qcm9wcykge1xuICAgIHRoaXMubG9nZ2VyRmFjdG9yeSA9IHByb3BzLmxvZ2dlckZhY3Rvcnk7XG4gICAgdGhpcy5yZXRyeVN0cmF0ZWd5ID0gcHJvcHMucmV0cnlTdHJhdGVneTtcbiAgICB0aGlzLnRyYW5zcG9ydFN0cmF0ZWd5ID0gcHJvcHMudHJhbnNwb3J0U3RyYXRlZ3k7XG4gICAgdGhpcy5taWRkbGV3YXJlcyA9IHByb3BzLm1pZGRsZXdhcmVzO1xuICB9XG5cbiAgZ2V0TG9nZ2VyRmFjdG9yeSgpOiBNb21lbnRvTG9nZ2VyRmFjdG9yeSB7XG4gICAgcmV0dXJuIHRoaXMubG9nZ2VyRmFjdG9yeTtcbiAgfVxuXG4gIGdldFJldHJ5U3RyYXRlZ3koKTogUmV0cnlTdHJhdGVneSB7XG4gICAgcmV0dXJuIHRoaXMucmV0cnlTdHJhdGVneTtcbiAgfVxuXG4gIHdpdGhSZXRyeVN0cmF0ZWd5KHJldHJ5U3RyYXRlZ3k6IFJldHJ5U3RyYXRlZ3kpOiBDb25maWd1cmF0aW9uIHtcbiAgICByZXR1cm4gbmV3IENhY2hlQ29uZmlndXJhdGlvbih7XG4gICAgICBsb2dnZXJGYWN0b3J5OiB0aGlzLmxvZ2dlckZhY3RvcnksXG4gICAgICByZXRyeVN0cmF0ZWd5OiByZXRyeVN0cmF0ZWd5LFxuICAgICAgdHJhbnNwb3J0U3RyYXRlZ3k6IHRoaXMudHJhbnNwb3J0U3RyYXRlZ3ksXG4gICAgICBtaWRkbGV3YXJlczogdGhpcy5taWRkbGV3YXJlcyxcbiAgICB9KTtcbiAgfVxuXG4gIGdldFRyYW5zcG9ydFN0cmF0ZWd5KCk6IFRyYW5zcG9ydFN0cmF0ZWd5IHtcbiAgICByZXR1cm4gdGhpcy50cmFuc3BvcnRTdHJhdGVneTtcbiAgfVxuXG4gIHdpdGhUcmFuc3BvcnRTdHJhdGVneSh0cmFuc3BvcnRTdHJhdGVneTogVHJhbnNwb3J0U3RyYXRlZ3kpOiBDb25maWd1cmF0aW9uIHtcbiAgICByZXR1cm4gbmV3IENhY2hlQ29uZmlndXJhdGlvbih7XG4gICAgICBsb2dnZXJGYWN0b3J5OiB0aGlzLmxvZ2dlckZhY3RvcnksXG4gICAgICByZXRyeVN0cmF0ZWd5OiB0aGlzLnJldHJ5U3RyYXRlZ3ksXG4gICAgICB0cmFuc3BvcnRTdHJhdGVneTogdHJhbnNwb3J0U3RyYXRlZ3ksXG4gICAgICBtaWRkbGV3YXJlczogdGhpcy5taWRkbGV3YXJlcyxcbiAgICB9KTtcbiAgfVxuXG4gIGdldE1pZGRsZXdhcmVzKCk6IE1pZGRsZXdhcmVbXSB7XG4gICAgcmV0dXJuIHRoaXMubWlkZGxld2FyZXM7XG4gIH1cblxuICB3aXRoTWlkZGxld2FyZXMobWlkZGxld2FyZXM6IE1pZGRsZXdhcmVbXSk6IENvbmZpZ3VyYXRpb24ge1xuICAgIHJldHVybiBuZXcgQ2FjaGVDb25maWd1cmF0aW9uKHtcbiAgICAgIGxvZ2dlckZhY3Rvcnk6IHRoaXMubG9nZ2VyRmFjdG9yeSxcbiAgICAgIHJldHJ5U3RyYXRlZ3k6IHRoaXMucmV0cnlTdHJhdGVneSxcbiAgICAgIHRyYW5zcG9ydFN0cmF0ZWd5OiB0aGlzLnRyYW5zcG9ydFN0cmF0ZWd5LFxuICAgICAgbWlkZGxld2FyZXM6IG1pZGRsZXdhcmVzLFxuICAgIH0pO1xuICB9XG5cbiAgYWRkTWlkZGxld2FyZShtaWRkbGV3YXJlOiBNaWRkbGV3YXJlKTogQ29uZmlndXJhdGlvbiB7XG4gICAgcmV0dXJuIG5ldyBDYWNoZUNvbmZpZ3VyYXRpb24oe1xuICAgICAgbG9nZ2VyRmFjdG9yeTogdGhpcy5sb2dnZXJGYWN0b3J5LFxuICAgICAgcmV0cnlTdHJhdGVneTogdGhpcy5yZXRyeVN0cmF0ZWd5LFxuICAgICAgdHJhbnNwb3J0U3RyYXRlZ3k6IHRoaXMudHJhbnNwb3J0U3RyYXRlZ3ksXG4gICAgICBtaWRkbGV3YXJlczogW21pZGRsZXdhcmUsIC4uLnRoaXMubWlkZGxld2FyZXNdLFxuICAgIH0pO1xuICB9XG5cbiAgd2l0aENsaWVudFRpbWVvdXRNaWxsaXMoY2xpZW50VGltZW91dDogbnVtYmVyKTogQ29uZmlndXJhdGlvbiB7XG4gICAgcmV0dXJuIG5ldyBDYWNoZUNvbmZpZ3VyYXRpb24oe1xuICAgICAgbG9nZ2VyRmFjdG9yeTogdGhpcy5sb2dnZXJGYWN0b3J5LFxuICAgICAgcmV0cnlTdHJhdGVneTogdGhpcy5yZXRyeVN0cmF0ZWd5LFxuICAgICAgdHJhbnNwb3J0U3RyYXRlZ3k6XG4gICAgICAgIHRoaXMudHJhbnNwb3J0U3RyYXRlZ3kud2l0aENsaWVudFRpbWVvdXRNaWxsaXMoY2xpZW50VGltZW91dCksXG4gICAgICBtaWRkbGV3YXJlczogdGhpcy5taWRkbGV3YXJlcyxcbiAgICB9KTtcbiAgfVxufVxuIl19